!function(t){var e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.boardW=50,e.boardH=25,e.colors=["blank","red","green","blue","white","hotpink","Aqua","LightGreen","Purple"]},function(t,e,o){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(o(0)),n=o(2),h=new WebSocket("ws://45.76.114.144:1273");h.binaryType="arraybuffer";for(var d=document.getElementById("game"),s=d.getContext("2d"),a=[],u=0;u<i.boardH;u++){a.push([]);for(var l=0;l<i.boardW;l++)a[u].push(0)}function b(t,e,o){s.fillStyle=o,s.fillRect(t*(d.width/i.boardW)+d.width/i.boardW/10,e*(d.height/i.boardH)+d.height/i.boardH/10,d.width/i.boardW-d.width/i.boardW/10,d.height/i.boardH-d.height/i.boardH/10)}d.width=window.innerWidth,d.height=window.innerHeight,h.addEventListener("message",(function(t){if(t.data instanceof ArrayBuffer)for(var e=new Uint8Array(t.data),o=0;o<e.length/3;o++)a[e[1+3*o]][e[0+3*o]]=e[2+3*o]}));var f=new n.Snake;setTimeout((function(){setInterval((function(){if(s.clearRect(0,0,d.width,d.height),f.move(),!f.dead){h.send(function(t){for(var e=new ArrayBuffer(3*t.body.length),o=new Uint8Array(e),r=0;r<t.body.length;r++)o[0+3*r]=t.body[r][0],o[1+3*r]=t.body[r][1],o[2+3*r]=t.color;return e}(f));for(var t=0;t<f.body.length;t++)b(f.body[t][0],f.body[t][1],i.colors[f.color])}for(var e=0;e<i.boardH;e++)for(var o=0;o<i.boardW;o++)a[e][o]&&(console.log(a[e][o]),f.dead||f.body[f.body.length-1][0]!=o||f.body[f.body.length-1][1]!=e||f.kill(),b(o,e,i.colors[a[e][o]]),a[e][o]=0)}),100)}),(new Date).getMilliseconds()%100)},function(t,e,o){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(o(0)),n=function(){function t(){var t=this,e=[Math.floor(Math.random()*i.boardW),Math.floor(Math.random()*i.boardH)];this.dirc=Math.floor(3*Math.random()),this.body=[e,e,e,e],this.fruit=!1,this.color=1,this.dead=!1,this.queue=[],document.addEventListener("keydown",(function(e){switch(e.key){case"ArrowUp":t.turn(0);break;case"ArrowDown":t.turn(1);break;case"ArrowLeft":t.turn(2);break;case"ArrowRight":t.turn(3);break;case"Shift":t.fruit=!0;break;case"Enter":t.cycleColor();break;case" ":t.dead&&t.reset()}}))}return t.prototype.kill=function(){this.body=[],this.dead=!0},t.prototype.cycleColor=function(){this.color=this.color==i.colors.length-1?0:this.color+1,0==this.color&&(this.color=1)},t.prototype.oppisite=function(t){return t%2?t-1:t+1},t.prototype.turn=function(t){if(!(this.queue.length>=4)){if(this.queue.length){if(this.oppisite(t)==this.queue[this.queue.length-1])return}else if(this.oppisite(t)==this.dirc)return;this.queue.push(t)}},t.prototype.move=function(){if(0!=this.queue.length&&(this.dirc=this.queue.shift()),!this.dead){switch(this.fruit?this.fruit=!1:this.body.shift(),this.dirc){case 0:this.body.push([this.body[this.body.length-1][0],this.body[this.body.length-1][1]-1]);break;case 1:this.body.push([this.body[this.body.length-1][0],this.body[this.body.length-1][1]+1]);break;case 2:this.body.push([this.body[this.body.length-1][0]-1,this.body[this.body.length-1][1]]);break;case 3:this.body.push([this.body[this.body.length-1][0]+1,this.body[this.body.length-1][1]])}this.body[this.body.length-1][0]!==i.boardW&&-1!==this.body[this.body.length-1][0]&&this.body[this.body.length-1][1]!==i.boardH&&-1!==this.body[this.body.length-1][1]||(this.body=[],this.dead=!0);for(var t=this.body.length-2;t>=0;t--)if(this.body[this.body.length-1][0]===this.body[t][0]&&this.body[this.body.length-1][1]===this.body[t][1]){this.kill();break}}},t.prototype.reset=function(){var t=[Math.floor(Math.random()*i.boardW),Math.floor(Math.random()*i.boardH)];this.dirc=Math.floor(4*Math.random()),this.body=[t,t,t,t],this.fruit=!1,this.dead=!1},t}();e.Snake=n}]);
